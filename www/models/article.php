<?php// Список всех статей//function articles_all() {    include $_SERVER['DOCUMENT_ROOT'] . "/config/config.php";    try {        $pdo = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . "", DB_USER, DB_PSWD);        $pdo->exec("SET CHARACTER SET utf8");        $pdo->exec("SET NAMES utf-8");        $query = "SELECT * FROM pro_articles ORDER BY id_article DESC";        $stmt = $pdo->query($query);        $articles = array();        while ($row = $stmt->fetch()) {            $articles[] = $row;        }        return $articles;    } catch (PDOException $e) {        echo "ошибка выборки статей " . $e;        return false;    }    $pdo = null;}//// Конкретная статья//function articles_get($id_article) {    //     // Запрос.    include $_SERVER['DOCUMENT_ROOT'] . "/config/config.php";    try {        $pdo = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . "", DB_USER, DB_PSWD);        $pdo->exec("SET CHARACTER SET utf8");        $pdo->exec("SET NAMES utf-8");        $t = "SELECT * FROM pro_articles             WHERE id_article = '%d'";        $query = sprintf($t, $id_article);        $stmt = $pdo->query($query);        $article = $stmt->fetch();        return $article;    } catch (PDOException $e) {        echo "ошибка выборки статьи " . $e;        return false;    }    $pdo = null;}//// Добавить статью//function articles_new($title, $content) {    // Подготовка.    $title = trim($title);    $content = trim($content);    // Проверка.    if ($title == '')        return false;    // Запрос.    $t = "INSERT INTO pro_articles (title, content) VALUES ('%s', '%s')";    $query = sprintf($t, mysql_real_escape_string($title), mysql_real_escape_string($content));    $result = mysql_query($query);    if (!$result)        die(mysql_error());    return true;}//// Изменить статью//function articles_edit($id_article, $title, $content) {    // TODO    $sql = "UPDATE pro_articles SET title = '%s', content = '%s'         WHERE id_article = '%d'";    $query = sprintf($sql, mysql_real_escape_string($title), mysql_real_escape_string($content), $id_article);    $result = mysql_query($query);    if (!$result)        die(mysql_error());    return true;}//// Удалить статью//function articles_delete($id_article) {    // TODO    $id = mysql_real_escape_string($id_article);    $sql = "DELETE FROM pro_articles WHERE id_article = $id";    $result = mysql_query($sql);    if (!$result)        die(mysql_error());    header("Location: editor.php");    exit;}//// Короткое описание статьи//function articles_intro($article) {    // $article - это ассоциативный массив, представляющий статью    include $_SERVER['DOCUMENT_ROOT'] . "/config/config.php";    $intros = array();    $anonse = 90;    try {        $pdo = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . "", DB_USER, DB_PSWD);        $pdo->exec("SET CHARACTER SET utf8");        $pdo->exec("SET NAMES utf-8");        foreach ($article as $intro) {            // Запрос. выбираем текст слева = анонсу            $query = "SELECT LEFT(content, $anonse) as content, id_article FROM pro_articles             WHERE id_article = '" . $intro['id_article'] . "'                 ORDER BY id_article DESC";            $stmt = $pdo->query($query);            $row = $stmt->fetch();            $row['content'] = $row['content'] . "...";            $intros[$row['id_article']] = $row['content'];        }        return $intros;    } catch (PDOException $e) {        echo "ошибка выборки интро " . $e;        return false;    }    $pdo = null;    }?>